{% extends "base.html" %}

{% block title %}C² Viewer | Map{% endblock %}
{% block description %}C² Viewer{% endblock %}

{% block head %}
  <link rel="stylesheet"
  href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.12.0/mapbox-gl.css"
  integrity="sha384-CS7AiMtZb5c/8weFoWn7/r2tRXJDwcTEdZudDXjRVNbwSJmKo8MGqDDQxYK7FjmX"
  crossorigin="anonymous"></link>
  <link href="{{ url_for('static', filename='css/map.css') }}" rel="stylesheet" />
  <script src="static/bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
  <link rel="import" href="static/bower_components/paper-toolbar/paper-toolbar.html"></link>
  <link rel="import" href="static/bower_components/iron-icons/iron-icons.html"></link>
  <link rel="import" href="static/bower_components/iron-icons/image-icons.html"></link>
  <link rel="import" href="static/bower_components/iron-icons/maps-icons.html"></link>
  <link rel="import" href="static/bower_components/iron-icons/communication-icons.html"></link>
  <link rel="import" href="static/bower_components/paper-menu/paper-menu.html"></link>
  <link rel="import" href="static/bower_components/paper-item/paper-item.html"></link>
  <link rel="import" href="static/bower_components/paper-button/paper-button.html"></link>
  <link rel="import" href="static/bower_components/paper-icon-button/paper-icon-button.html"></link>
  <link rel="import" href="static/bower_components/paper-header-panel/paper-header-panel.html"></link>
  <link rel="import" href="static/bower_components/paper-drawer-panel/paper-drawer-panel.html"></link>
{% endblock %}

{% block body %}
<paper-drawer-panel>
  <paper-header-panel drawer>
    <paper-toolbar>
      <h3>PacGeo C² Viewer</h3>
    </paper-toolbar>
    <paper-menu selected=0>
      <paper-item id="imagery">Imagery</paper-item>
      <paper-item id="topo">Topographic</paper-item>
      <paper-item id="streets">Streets</paper-item>
    </paper-listbox>
    <paper-button id="logout" >Logout</paper-button>
    <paper-item id="email">{{ user.email }}</paper-item>
  </paper-header-panel>
  <paper-header-panel main>
    <paper-toolbar>
      <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
    </paper-toolbar>
    <div id="map"></div>
  </paper-header-panel>
</paper-drawer-panel>
<div id="map_controls">
  <iron-icon class="map_control" id="zoom_in" icon="icons:zoom-in"></iron-icon>
  <iron-icon class="map_control" id="zoom_out" icon="icons:zoom-out"></iron-icon>
  <iron-icon class="map_control" id="rotate" icon="image:rotate-90-degrees-ccw"></iron-icon>
  <iron-icon class="map_control" id="tilt" icon="communication:clear-all"></iron-icon>
</div>
<!-- MAP -->
{% endblock %}

{% block footer %}
<script
  src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.12.0/mapbox-gl.js"
  integrity="sha384-IKLm3im4gYUyqiEmJbIhNN1S6b/kJwrwhVKRXoschJo7cKAmTCFUN7VT6OEGcbQv"
  crossorigin="anonymous"></script>
  <script>
  mapboxgl.accessToken = "{{ config.MAPBOX_ACCESS_TOKEN }}";
  var IMAGERY = "{{custom_data.imagery}}",
      DATA = "{{custom_data.features}}",
      CENTER = [{{custom_data.map.x}}, {{custom_data.map.y}}],
      ZOOM = {{custom_data.map.zoom}};
  </script>
  <script src="{{ url_for('static', filename='js/styles.js') }}" type="text/javascript"></script>
  <script src="{{ url_for('static', filename='js/map.js') }}" type="text/javascript"></script>
{% endblock %}
